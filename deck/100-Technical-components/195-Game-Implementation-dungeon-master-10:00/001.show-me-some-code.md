---
marp: true
theme: default
paginate: true
---
<style>
.dodgerblue {
  color: dodgerblue;
}
.indianred {
  color: indianred;
}
.blue {
  color: blue;
}
.orange {
  color: orange;
}
.green {
  color: green;
}
</style>
### Code Architecture Overview: **Main Loop** - Part 2

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">

<div>

<div class="mermaid">
graph TD
    Main["/dungeon-master/main.go | (Main Application: Tool Calls Detection)"]
    NPCAgent["compose-dragons/agents/npcagents.go</br>| (Tool Calls Detection Loop)"]

    Main -->|"Uses"| NPCAgent

    style Main fill:#4A90E2,stroke:#2E5C8A,stroke-width:3px,color:#fff
    style NPCAgent fill:#7ED321,stroke:#5FA019,stroke-width:3px,color:#fff
</div>

</div>

<div>

**Legend:**
- **<span class="blue">Blue</span>** ([`main.go`](/dungeon-master/main.go#L204)): Tool calls detection by **Zephyr** the Dungeon Master agent
- **<span class="green">Green</span>** ([`npcagents.go`](/compose-dragons/agents/npcagents.go#L676)): Tool calls detection loop implementation (with confirmation)

</div>

</div>
